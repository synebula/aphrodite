# 约定路由

- 默认扫描src/pages下所有.js文件后缀文件左右路由信息.
- 路由页面使用.js文件后缀,如果页面需要拆分页面组件请使用.jsx文件后缀.
- 带 : 前缀的目录或文件为动态路由.
- 动态路由如果带 ? 后缀，则为可选动态路由.
- 目录下有 layout.js 时会生成嵌套路由，以 _layout.js 为该目录的 layout .
- 约定 src/layouts/index.js 为全局路由，返回一个 React 组件，通过 props.children 渲染子组件.

## 路由生成插件

### 生成规则
1. 如果节点为布局且路径深度为1则不为其生成路由布局节点，找到其下子节点作为布局节点（不生成非exact绝对比配的嵌套路由）。
1. 路由节点遍历中间数据结构{path, comp, pages}, 其中pages为空说明为exact节点。
1. 路由节点存储为两层数组结构：第一层为路径深度索引，第二层为实际路由节点。

### 生成流程

```
        获取节点
            |
            |
|------>是否有子元素 --N-- 是否传递布局组信息  --Y-- 加入布局组
|           |                  | 
|           |                  N   
|           |                  | 
|           Y            以当前节点路径和传递的布局组件生成布局组
|           |            并加入路由节点存储 <--|
|           |                  ^            |   
|           |                  |            |
|           |                  |            |
|       是否布局 -------N-------             |
|           |                               |
|           Y                               |
|           |                               |
|       路径长度>0 ----------Y----------生成布局组信息
|           |
|           Y
|           |
|       传递布局信息
|           |
|           |
 -------获取子元素并遍历
```